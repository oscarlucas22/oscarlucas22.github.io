(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{1042:function(e,a,n){e.exports=n.p+"assets/img/1.2fe1defc.png"},1043:function(e,a,n){e.exports=n.p+"assets/img/2.d5b8c62c.png"},1044:function(e,a,n){e.exports=n.p+"assets/img/3.3c548adc.png"},1045:function(e,a){e.exports="data:image/png;base64,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"},1046:function(e,a,n){e.exports=n.p+"assets/img/5.d6c6f0db.png"},1047:function(e,a,n){e.exports=n.p+"assets/img/6.b25e3738.png"},1048:function(e,a,n){e.exports=n.p+"assets/img/7.022d9c7c.png"},1049:function(e,a,n){e.exports=n.p+"assets/img/8.d5d778e4.png"},1050:function(e,a,n){e.exports=n.p+"assets/img/9.56bd6206.png"},1153:function(e,a,n){"use strict";n.r(a);var s=n(1),r=Object(s.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"practica-implantacion-de-aplicaciones-web-python-en-docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#practica-implantacion-de-aplicaciones-web-python-en-docker"}},[e._v("#")]),e._v(" Práctica: Implantación de aplicaciones web Python en docker")]),e._v(" "),a("p",[a("strong",[e._v("Queremos desplegar en docker la aplicación escrita en python django: tutorial de django, que desplegamos en la tarea Despliegue de aplicaciones python.")])]),e._v(" "),a("p",[a("strong",[e._v("Tienes que tener en cuenta los siguientes aspectos:")])]),e._v(" "),a("ul",[a("li",[a("p",[a("strong",[e._v("La aplicación debe guardar los datos en una base de datos mariadb.")])])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("La aplicación se podrá configurar para indicar los parámetros de conexión a la base de datos: usuario, contraseña, host y base de datos.")])])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("La aplicación deberá tener creado un usuario administrador para el acceso.")])])])]),e._v(" "),a("hr"),e._v(" "),a("h2",{attrs:{id:"entorno-de-desarrollo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#entorno-de-desarrollo"}},[e._v("#")]),e._v(" Entorno de desarrollo")]),e._v(" "),a("p",[e._v("Procederemos a establecer un ambiente de desarrollo que nos permitirá llevar a cabo todas las pruebas requeridas antes de desplegar nuestra aplicación en producción. De esta manera, podremos asegurarnos de que se encuentre en óptimas condiciones antes de su lanzamiento oficial.")]),e._v(" "),a("p",[e._v("Además, generaremos dos contenedores que se conectarán en la misma red. Una vez que hayamos verificado el correcto funcionamiento de la aplicación, avanzaremos en la creación del archivo docker-compose para implementarla en producción.")]),e._v(" "),a("h3",{attrs:{id:"creacion-de-la-red"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#creacion-de-la-red"}},[e._v("#")]),e._v(" Creación de la red")]),e._v(" "),a("p",[e._v("Para crear la red, ejecutamos el siguiente comando:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("docker network create django-network\n")])])]),a("h3",{attrs:{id:"creacion-del-contenedor-de-la-base-de-datos"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#creacion-del-contenedor-de-la-base-de-datos"}},[e._v("#")]),e._v(" Creación del contenedor de la base de datos")]),e._v(" "),a("p",[e._v("Creamos el contenedor de mariadb con las siguientes variables")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("docker run -d --name mariadb -v vol-polls:/var/lib/mysql --network django-network -e MARIADB_ROOT_PASSWORD=admin -e MARIADB_USER=django -e MARIADB_PASSWORD=admin -e MARIADB_DATABASE=django mariadb\n")])])]),a("p",[e._v("Realizamos una modificación al archivo "),a("code",[e._v("settings.py")]),e._v(" para que pueda leer las variables de entorno. Para ello, agregamos o actualizamos la siguiente información:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("import os\n")])])]),a("hr"),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v('ALLOWED_HOSTS = [os.environ.get("ALLOWED_HOSTS")]\n')])])]),a("hr"),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("DATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.mysql',\n        'NAME': os.environ.get(\"DB\"),\n        'USER': os.environ.get('USER'),\n        'PASSWORD': os.environ.get(\"PASSWD\"),\n        'HOST': os.environ.get('HOST'),\n        'PORT': '3306',\n    }\n}\n")])])]),a("hr"),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("STATIC_ROOT = os.path.join(BASE_DIR, 'static')\nSTATIC_URL = '/static/'\n\nCSRF_TRUSTED_ORIGINS = ['http://*.olucass.com','http://*.127.0.0.1','https://*.olucass.com','https://*.127.0.0.1']\n")])])]),a("p",[e._v("Creamos el Dockerfile a partir de la imagen de python:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("nano Dockerfile\n")])])]),a("hr"),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("FROM python:3\nWORKDIR /usr/src/app\nMAINTAINER oscarlucas 'oscarlucasleo124@gmail.com'\nRUN apt-get install git && pip install --root-user-action=ignore --upgrade pip && pip install --root-user-action=ignore django mysqlclient\nRUN git clone https://github.com/oscarlucas22/django_tutorial_docker /usr/src/app && mkdir static\nADD ./script.sh /usr/src/app/\nRUN chmod +x /usr/src/app/script.sh\nENV ALLOWED_HOSTS=*\nENV HOST=mariadb\nENV USER=django\nENV PASSWD=django\nENV DB=django\nENV DJANGO_SUPERUSER_PASSWORD=admin\nENV DJANGO_SUPERUSER_USERNAME=admin\nENV DJANGO_SUPERUSER_EMAIL=admin@example.org\nENTRYPOINT [\"/usr/src/app/script.sh\"]\n")])])]),a("p",[e._v("Al final del Dockerfile hacemos referencia a un script. Dicho script es el siguiente:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("nano script.sh\n")])])]),a("hr"),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("#! /bin/sh\n\npython3 manage.py makemigrations\npython3 manage.py migrate\npython3 manage.py createsuperuser --noinput\npython3 manage.py collectstatic --noinput\npython3 manage.py runserver 0.0.0.0:8006\n")])])]),a("p",[e._v("Creamos la imagen de Docker:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("docker build -t oscarlucas/django:v1 .\n")])])]),a("p",[e._v("Antes de crear el archivo docker-compose para implementar la imagen, realizamos una prueba de ésta mediante la creación de un contenedor adicional en la misma red que el contenedor de mariadb:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("docker run -d --name polls --network django-network -p 8080:8006 oscarlucas/django:v1\n")])])]),a("p",[e._v("Después de comprobar que todo funciona correctamente en la imagen anterior, procedemos a crear el archivo docker-compose que iniciará los dos contenedores previamente generados.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("nano docker-compose.yml\n")])])]),a("hr"),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("version: '3.1'\nservices:\n  django-tutorial:\n    container_name: django-tutorial\n    image: oscarlucas/django:v1\n    restart: always\n    environment:\n      ALLOWED_HOSTS: \"*\"\n      HOST: bd_mariadb_django\n      USER: django\n      PASSWD: django\n      DB: django\n      DJANGO_SUPERUSER_PASSWORD: admin\n      DJANGO_SUPERUSER_USERNAME: admin\n      DJANGO_SUPERUSER_EMAIL: admin@admin.org\n    ports:\n      - 8084:8006\n    depends_on:\n      - db_django\n  db_django:\n    container_name: bd_mariadb_django\n    image: mariadb\n    restart: always\n    environment:\n      MARIADB_ROOT_PASSWORD: root\n      MARIADB_DATABASE: django\n      MARIADB_USER: django\n      MARIADB_PASSWORD: django\n    volumes:\n      - mariadb_data_django:/var/lib/mysql\nvolumes:\n    mariadb_data_django:\n")])])]),a("p",[e._v("Intentemos ejecutar el entorno de desarrollo mediante el uso del archivo docker-compose:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("docker-compose up -d\n")])])]),a("p",[a("img",{attrs:{src:n(1042),alt:"image"}})]),e._v(" "),a("p",[e._v("Tratamos de acceder al panel de administración utilizando las credenciales que establecimos en el archivo docker-compose:")]),e._v(" "),a("p",[a("img",{attrs:{src:n(1043),alt:"image"}})]),e._v(" "),a("h2",{attrs:{id:"entorno-de-produccion"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#entorno-de-produccion"}},[e._v("#")]),e._v(" Entorno de producción")]),e._v(" "),a("p",[e._v("Como podemos observar, todo parece estar funcionando correctamente. Ahora nos dirigimos al entorno de producción para ejecutar el archivo docker-compose correspondiente:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("docker-compose up -d\n")])])]),a("p",[e._v("Vemos que se han creado ambos contenedores:")]),e._v(" "),a("p",[a("img",{attrs:{src:n(1044),alt:"image"}})]),e._v(" "),a("p",[e._v("Ahora debemos crear un nuevo registro CNAME en nuestro servidor DNS:")]),e._v(" "),a("p",[a("img",{attrs:{src:n(1045),alt:"image"}})]),e._v(" "),a("p",[e._v('Una vez completado este paso, estaremos listos para solicitar los certificados de "Let\'s Encrypt" correspondientes al nuevo dominio:')]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("certbot certonly --standalone -d django.olucass.com\n")])])]),a("p",[e._v("Una vez generados, solo tenemos que crear el proxy en nginx para que nos permita acceder al contenedor:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("nano /etc/nginx/sites-available/django.olucass.com\n")])])]),a("hr"),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("server {\n        listen 80;\n        listen [::]:80;\n\n        server_name django.olucass.com;\n\n        return 301 https://$host$request_uri;\n}\n\nserver {\n        listen 443 ssl http2;\n        listen [::]:443 ssl http2;\n\n        ssl    on;\n        ssl_certificate /etc/letsencrypt/live/django.olucass.com/fullchain.pem;\n        ssl_certificate_key /etc/letsencrypt/live/django.olucass.com/privkey.pem;\n\n        index index.html index.php index.htm index.nginx-debian.html;\n\n        server_name django.olucass.com;\n\n        location / {\n                proxy_pass http://localhost:8084;\n                include proxy_params;\n        }\n}\n")])])]),a("p",[e._v("Generamos un enlace simbólico para que nginx pueda cargar la configuración y procedemos a reiniciar el servicio correspondiente:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("ln -s /etc/nginx/sites-available/django.olucass.com /etc/nginx/sites-enabled/\n")])])]),a("hr"),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("systemctl restart nginx\n")])])]),a("p",[e._v("Si accedemos desde nuestro navegador a la dirección "),a("a",{attrs:{href:"https://django.olucass.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("django.olucass.com"),a("OutboundLink")],1),e._v(" podemos ver que accedemos a la aplicación.")]),e._v(" "),a("p",[a("img",{attrs:{src:n(1046),alt:"image"}})]),e._v(" "),a("p",[e._v("Y que podemos acceder a la zona de administración.")]),e._v(" "),a("p",[a("img",{attrs:{src:n(1047),alt:"image"}})]),e._v(" "),a("p",[a("img",{attrs:{src:n(1048),alt:"image"}})]),e._v(" "),a("p",[a("img",{attrs:{src:n(1049),alt:"image"}})]),e._v(" "),a("p",[a("img",{attrs:{src:n(1050),alt:"image"}})])])}),[],!1,null,null,null);a.default=r.exports}}]);