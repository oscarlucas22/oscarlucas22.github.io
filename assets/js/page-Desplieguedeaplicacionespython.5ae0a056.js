(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{534:function(a,e){a.exports="data:image/png;base64,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"},535:function(a,e,o){a.exports=o.p+"assets/img/1-2_django.1601b083.png"},536:function(a,e,o){a.exports=o.p+"assets/img/1-3_django.62b5f126.png"},537:function(a,e,o){a.exports=o.p+"assets/img/1-4_django.96e31cab.png"},538:function(a,e,o){a.exports=o.p+"assets/img/1-5_django.abfb9f2d.png"},539:function(a,e,o){a.exports=o.p+"assets/img/1-6_django.fb6d7c39.png"},540:function(a,e,o){a.exports=o.p+"assets/img/1-7_django.b58e15d5.png"},541:function(a,e,o){a.exports=o.p+"assets/img/1-8_django.b8cdfb63.png"},542:function(a,e,o){a.exports=o.p+"assets/img/1-9_django.f0ce91ca.png"},543:function(a,e,o){a.exports=o.p+"assets/img/1-10_django.eed07fed.png"},544:function(a,e,o){a.exports=o.p+"assets/img/1-11_django.77b6bd85.png"},545:function(a,e,o){a.exports=o.p+"assets/img/1-12_django.c7beffa8.png"},546:function(a,e,o){a.exports=o.p+"assets/img/1-13_django.46fd7db6.png"},547:function(a,e,o){a.exports=o.p+"assets/img/1-14_django.fdaf25a4.png"},548:function(a,e,o){a.exports=o.p+"assets/img/1-15_django.fb838896.png"},549:function(a,e,o){a.exports=o.p+"assets/img/1-16_django.d1f1bd9d.png"},550:function(a,e,o){a.exports=o.p+"assets/img/1-17_django.a3df79d5.png"},689:function(a,e,o){"use strict";o.r(e);var n=o(1),s=Object(n.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"despliegue-de-aplicaciones-python"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#despliegue-de-aplicaciones-python"}},[a._v("#")]),a._v(" Despliegue de aplicaciones python")]),a._v(" "),e("p",[e("a",{attrs:{href:"https://fp.josedomingo.org/iaw2223/4_python/practica.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Página del ejercicio."),e("OutboundLink")],1)]),a._v(" "),e("h2",{attrs:{id:"tarea-1-entorno-de-desarrollo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tarea-1-entorno-de-desarrollo"}},[a._v("#")]),a._v(" Tarea 1: Entorno de desarrollo")]),a._v(" "),e("p",[e("strong",[a._v("Vamos a desplegar la aplicación del tutorial de django. Como entorno de desarrollo tienes dos opciones:")])]),a._v(" "),e("p",[e("strong",[a._v("Que tu entorno de desarrollo se la máquina bravo de tu entorno de desarrollo. Opción que dará más puntos.")]),a._v(" "),e("em",[e("strong",[a._v("Opción elegida")])])]),a._v(" "),e("p",[e("strong",[a._v("Que tu entorno de desarrollo sea una máquina de openstack con el sistema operativo que quieras. Opción que dará menos puntos.")])]),a._v(" "),e("p",[e("strong",[a._v("Vamos a configurar tu equipo como entorno de desarrollo para trabajar con la aplicación, para ello:")])]),a._v(" "),e("ul",[e("li",[e("strong",[a._v("Realiza un fork del repositorio de GitHub: "),e("a",{attrs:{href:"https://github.com/josedom24/django_tutorial",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://github.com/josedom24/django_tutorial"),e("OutboundLink")],1)])])]),a._v(" "),e("p",[a._v("Para la clonación tenemos a nuestra disposición 3 protocolos diferentes de los que podemos hacer uso. En mi caso voy a utilizar el protocolo HTTPS.")]),a._v(" "),e("p",[e("strong",[a._v("Nota")]),a._v(": Si no tenemos instalado el comando "),e("code",[a._v("git")]),a._v(" lo instalamos:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("sudo dnf install git\n")])])]),e("p",[a._v("Cuando hayamos obtenido la URI de descarga, se la pasaremos a "),e("code",[a._v("git clone")]),a._v(":")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("git clone <<URL de descarga>>\n")])])]),e("p",[a._v("Y una vez hecho esto el repositorio de nombre django_tutorial ha sido correctamente clonado en nuestra máquina local y podremos empezar a hacer uso del mismo.")]),a._v(" "),e("ul",[e("li",[e("strong",[a._v("Crea un entorno virtual de python3 e instala las dependencias necesarias para que funcione el proyecto.")])])]),a._v(" "),e("p",[a._v("Instalaremos los paquetes necesarios para que la aplicación funcione. Para la correspondiente creación de un entorno virtual, debemos instalar previamente el paquete necesario (python3-venv), ejecutando para ello el comando:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("sudo dnf install python3-venv\n")])])]),e("p",[a._v("Podemos crear este entorno en una carpeta a parte. Ejecutaremos el entorno con el siguiente comando:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("python3 -m venv <<Nombre del entorno>>\n")])])]),e("p",[a._v("Una vez creado, tendremos que iniciarlo haciendo uso del comando "),e("code",[a._v("source")]),a._v(" con el binario activate que se encuentra contenido en el directorio bin/:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("source <<Nombre del entorno>>/bin/activate\n")])])]),e("p",[a._v("Y hecho esto nuestro entorno habrá sido habilitado.")]),a._v(" "),e("ul",[e("li",[e("strong",[a._v("Comprueba que vamos a trabajar con una base de datos sqlite. ¿Qué fichero tienes que consultar? ¿Cómo se llama la base de datos que vamos a crear?")])])]),a._v(" "),e("p",[a._v("Estos paquetes lo entontraremos en el fichero "),e("code",[a._v("requirements.txt")]),a._v(" que se encuentra entre los ficheros que hemos clonado del GitHub")]),a._v(" "),e("p",[e("img",{attrs:{src:o(534),alt:"image"}})]),a._v(" "),e("p",[a._v("E instalaremos los paquetes que se encuentan en el, con el siguiente comando:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("pip install -r requirements.txt\n")])])]),e("p",[a._v("Para demostrarlo, vamos a leer el contenido del fichero "),e("code",[a._v("settings.py")]),a._v(" existente en el subdirectorio "),e("code",[a._v("django_tutorial/")]),a._v(" previamente mencionado, para así visualizar la sección referente al uso de la base de datos, haciendo para ello uso del comando:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("cat django_tutorial/settings.py\n")])])]),e("p",[a._v("Dentro del mismo, encontraremos una sección de nombre DATABASES, que por defecto tendrá la siguiente forma:")]),a._v(" "),e("p",[e("img",{attrs:{src:o(535),alt:"image"}})]),a._v(" "),e("p",[a._v("Para poder acceder desde cualquier sitio encontraremos en este fichero la linea "),e("code",[a._v("ALLOWED_HOSTS =")]),a._v(" y la editaremos dejandola de la siguiente manera:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("ALLOWED_HOSTS = ['*']\n")])])]),e("p",[e("strong",[a._v("Nota")]),a._v(": El "),e("code",[a._v("*")]),a._v(" es para que se conecte a cualquier dirección, pero tambien podremos poner una Ip en concreto.")]),a._v(" "),e("p",[a._v("Como se puede apreciar, la base de datos es de tipo sqlite3, un tipo de base de datos muy pequeña, tan pequeña que se encuentra contenida en un fichero, que todavía no se encuentra generado. Para generarlo, tendremos que aplicar las migraciones:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("python3 manage.py migrate\n")])])]),e("p",[e("img",{attrs:{src:o(536),alt:"image"}})]),a._v(" "),e("p",[a._v("Para verificar que el fichero que contiene la base de datos sqlite3 ha sido correctamente generado, listaremos el contenido del directorio:")]),a._v(" "),e("p",[e("img",{attrs:{src:o(537),alt:"image"}})]),a._v(" "),e("p",[a._v("Efectivamente, un fichero de nombre "),e("code",[a._v("db.sqlite3")]),a._v(" ha sido generado, que contendrá todas las tablas necesarias.")]),a._v(" "),e("ul",[e("li",[e("p",[e("strong",[a._v("Crea la base de datos. A partir del modelo de datos se crean las tablas de la base de datos.")])])]),a._v(" "),e("li",[e("p",[e("strong",[a._v("Crea un usuario administrador.")])])])]),a._v(" "),e("p",[a._v("La aplicación se encuentra ya instalada en su totalidad, de manera que vamos a proceder a crear un usuario administrador de dicho proyecto, que tendrá privilegios suficientes para acceder a la zona de administración, ejecutando para ello el comando:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("python3 manage.py createsuperuser\n")])])]),e("p",[e("img",{attrs:{src:o(538),alt:"image"}})]),a._v(" "),e("ul",[e("li",[e("strong",[a._v("Ejecuta el servidor web de desarrollo y entra en la zona de administración (/admin) para comprobar que los datos se han añadido correctamente.")])])]),a._v(" "),e("p",[a._v("Se nos ha solicitado un nombre de usuario para el mismo, un correo electrónico y una contraseña, así que una vez creado, vamos a proceder a arrancar el servidor web ligero que nos proporciona Django:")]),a._v(" "),e("p",[a._v("Y una vez hecho esto ya prodremos acceder al servidor web, poniendo en el navegador "),e("code",[a._v("localhost:8000/admin")]),a._v(" para acceder a la zona de administración.")]),a._v(" "),e("p",[e("img",{attrs:{src:o(539),alt:"image"}})]),a._v(" "),e("p",[a._v("Una vez hayamos accedido a la zona de administración, se nos solicitarán los credenciales del usuario administrador que acabamos de generar, así que tras introducirlos, pulsaremos en "),e("strong",[a._v("Log in")]),a._v(".")]),a._v(" "),e("p",[e("img",{attrs:{src:o(540),alt:"image"}})]),a._v(" "),e("p",[a._v("Y como podemos comprobar el acceso a la zona de administración ha funcionado correctamente.")]),a._v(" "),e("ul",[e("li",[e("strong",[a._v("Crea dos preguntas, con posibles respuestas.")])])]),a._v(" "),e("p",[a._v("Para comprobar el funcionamiento de esta última aplicación, vamos a añadir dos nuevas preguntas, pulsando para ello en "),e("strong",[a._v("+ Add")]),a._v(" en el apartado "),e("strong",[a._v("Questions")]),a._v(" de la sección "),e("strong",[a._v("polls")])]),a._v(" "),e("p",[a._v("En mi caso, he creado la pregunta “¿Cuál es tu color favorito?” con 4 posibles respuestas, indicando a su vez la fecha y hora de inicio de la encuesta. Cuando hayamos finalizado, pulsaremos en "),e("strong",[a._v("Save and add another")]),a._v(' para así añadir una segunda encuesta de prueba la cual dice "¿Qué marca de portátil prefieres?" con 3 posibles respuestas. Por último, pulsaremos en '),e("strong",[a._v("SAVE")]),a._v(" para añadirla y volver a la zona de administración::")]),a._v(" "),e("p",[e("img",{attrs:{src:o(541),alt:"image"}})]),a._v(" "),e("p",[e("img",{attrs:{src:o(542),alt:"image"}})]),a._v(" "),e("p",[e("img",{attrs:{src:o(543),alt:"image"}})]),a._v(" "),e("ul",[e("li",[e("strong",[a._v("Comprueba en el navegador que la aplicación está funcionando, accede a la url /polls.")])])]),a._v(" "),e("p",[a._v("Como se puede apreciar, las dos preguntas han sido correctamente generadas, así que accederemos tras ello a la ruta "),e("strong",[a._v("/polls")]),a._v(" para así hacer uso de dicha aplicación, en la que se mostrarán las encuestas existentes y nos permitirá votar entre las diferentes posibilidades:")]),a._v(" "),e("p",[e("img",{attrs:{src:o(544),alt:"image"}})]),a._v(" "),e("p",[a._v("Efectivamente, ambas encuestas han sido mostradas, de manera que accederemos a la primera de ellas para verificar que todo funciona como debería:")]),a._v(" "),e("p",[e("img",{attrs:{src:o(545),alt:"image"}})]),a._v(" "),e("p",[a._v("Y haremos uso de la votación:")]),a._v(" "),e("p",[e("img",{attrs:{src:o(546),alt:"image"}})]),a._v(" "),e("p",[a._v("Efectivamente, el voto ha sido correctamente registrado y los resultados actuales, mostrados.")]),a._v(" "),e("p",[a._v("Vamos a comprobar qué ha ocurrido de una forma más interna, volviendo a la terminal y utilizando un cliente sqlite3 que tenía instado con anterioridad, para así hacer uso de la base de datos existente. Pero antes debemos de instalar "),e("code",[a._v("sqlite")]),a._v(":")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("dnf -y install sqlite\n")])])]),e("p",[e("img",{attrs:{src:o(547),alt:"image"}})]),a._v(" "),e("p",[a._v("Y despues ejecutaremos el comando para ejecutar la base de datos:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("sqlite3 db.sqlite3\n")])])]),e("p",[e("img",{attrs:{src:o(548),alt:"image"}})]),a._v(" "),e("p",[a._v("Una vez dentro del cliente con la correspondiente base de datos abierta, vamos a ejecutar la instrucción necesaria para listar las tablas existentes en la misma:")]),a._v(" "),e("p",[e("img",{attrs:{src:o(549),alt:"image"}})]),a._v(" "),e("p",[a._v("En la salida de la instrucción se han mostrado todas las tablas resultantes de haber aplicado las correspondientes migraciones, siendo "),e("strong",[a._v("polls_question")]),a._v(" aquella en la que se almacenarán las dos preguntas que hemos creado, así como "),e("strong",[a._v("polls_choice")]),a._v(" aquella en la que se almacenarán las posibles respuestas y los votos realizados para cada una de ellas. Vamos a proceder a comprobar el contenido de ambas, ejecutando para ello las instrucciones:")]),a._v(" "),e("p",[e("img",{attrs:{src:o(550),alt:"image"}})]),a._v(" "),e("ul",[e("li",[e("p",[e("strong",[a._v("Configura el servidor web apache2 con el módulo wsgi para servir la página web. Si utilizas como entorno de desarrollo la máquina bravo, se accederá con el nombre python.tunombre.gonzalonazareno.org. Si tu entorno de desarrollo es una máquina de openstack, elige el nombre con el que acceder y entrega la dirección IP de la máquina.")])])]),a._v(" "),e("li",[e("p",[a._v("Primero reuniremos los ficheros estaticos:")])])]),a._v(" "),e("hr"),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("nano /django_tutorial/settings.py\n")])])]),e("hr"),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("STATIC_ROOT = '/var/www/html/django_tutorial/static'\n")])])]),e("ul",[e("li",[a._v("Despues instalaremos el modulo wsgi para apache:")])]),a._v(" "),e("hr"),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("dnf install mod_wsgi httpd\n")])])]),e("ul",[e("li",[a._v("Despues crearemos nuestro VirtualHost:")])]),a._v(" "),e("hr"),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("<VirtualHost *:80>\n    ServerName python.olucas.gonzalonazareno.org\n\n    DocumentRoot /var/www/html/django_tutorial\n\n    Alias /static/ /var/www/html/django_tutorial/static/\n\n    WSGIDaemonProcess django_tutorial python-path=/var/www/html/django_tutorial:/var/www/html/django/lib/python3.9/site-packages\n    WSGIProcessGroup django_tutorial\n    WSGIScriptAlias / /var/www/html/django_tutorial/django_tutorial/wsgi.py\n\n    <Directory /var/www/html/django_tutorial/static>\n        Require all granted\n    </Directory>\n\n    <Directory /var/www/html/django_tutorial>\n        Require all granted\n        Allow from all\n    </Directory>\n\n    <Directory /var/www/html/django_tutorial/django_tutorial>\n        <Files wsgi.py>\n            Require all granted\n        </Files>\n    </Directory>\n\n    ErrorLog /var/log/httpd/django_tutorial_error.log\n    CustomLog /var/log/httpd/django_tutorial_access.log combined\n</VirtualHost>\n")])])]),e("ul",[e("li",[a._v("Despues de hacer esto habilitaremos el fichero")])]),a._v(" "),e("hr"),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("ln -s /etc/httpd/site-enabled/ /etc/httpd/site-available/python.conf\n")])])]),e("ul",[e("li",[a._v("Nos iremos a la maquina charlie y lo habilitaremos en las vistas que ya hemos creado")])]),a._v(" "),e("p",[e("em",[a._v("En interna:")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("python  IN  CNAME   bravo\n")])])]),e("p",[e("em",[a._v("En dmz:")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("python  IN  CNAME   bravo\n")])])]),e("p",[e("em",[a._v("En externa:")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("python  IN  CNAME   alfa\n")])])]),e("p",[a._v("Borraremos la caché:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("rncd flush\n")])])]),e("p",[a._v("Reiniciaremos bind9:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("systemctl restart bind9\n")])])]),e("p",[a._v("Sepación")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("python manage.py dumpdata > db.json\n")])])]),e("h2",{attrs:{id:"tarea-2-entorno-de-produccion"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tarea-2-entorno-de-produccion"}},[a._v("#")]),a._v(" Tarea 2: Entorno de producción")]),a._v(" "),e("p",[e("strong",[a._v("Vamos a realizar el despliegue de nuestra aplicación en un entorno de producción, para ello vamos a utilizar nuestro VPS, sigue los siguientes pasos:")])]),a._v(" "),e("ul",[e("li",[e("strong",[a._v("Clona el repositorio en el VPS")])])]),a._v(" "),e("hr"),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("git clone https://github.com/oscarlucas22/django_tutorial.git\n")])])]),e("ul",[e("li",[e("strong",[a._v("Crea un entorno virtual e instala las dependencias de tu aplicación.")])])]),a._v(" "),e("hr"),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("sudo apt-get install python-virtualenv virtualenv\npython3 -m venv my_entorno\nsource my_entorno/bin/activate\npip install -r requirements.txt\n")])])]),e("ul",[e("li",[e("strong",[a._v("Instala el módulo que permite que python trabaje con mysql:")])])]),a._v(" "),e("hr"),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("apt install python3-dev default-libmysqlclient-dev build-essential\n")])])]),e("hr"),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("(my_entorno)$ pip install mysqlclient\n")])])]),e("ul",[e("li",[e("strong",[a._v("Crea una base de datos y un usuario en mysql.")])])]),a._v(" "),e("hr"),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("sudo apt-get install default-mysql-server\n")])])]),e("hr"),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("sudo mysql -u root -p\n")])])]),e("hr"),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("create database db_django;\ncreate user 'user_django'@'localhost' identified by 'root';\ngrant all privileges on db_django.* to 'user_django'@'localhost';\n")])])]),e("ul",[e("li",[e("strong",[a._v("Configura la aplicación para trabajar con mysql, para ello modifica la configuración de la base de datos en el archivo "),e("code",[a._v("settings.py")]),a._v(":")])])]),a._v(" "),e("hr"),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("nano django_tutorial/settings.py\n")])])]),e("hr"),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("DATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.mysql',\n        'NAME': 'db_django',\n        'USER': 'user_django',\n        'PASSWORD': 'root',\n        'HOST': 'localhost',\n        'PORT': '',\n    }\n}\n")])])]),e("ul",[e("li",[e("strong",[a._v("Crea una copia de seguridad de la base de datos. Ten en cuenta que en el entorno de desarrollo vas a tener una base de datos sqlite, y en el entorno de producción una mariadb, por lo tanto es recomendable para hacer la copia de seguridad y recuperarla con los comandos: "),e("code",[a._v("python manage.py dumpdata")]),a._v(" y "),e("code",[a._v("python manage.py loaddata")]),a._v(", para más información.")])])]),a._v(" "),e("hr"),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("python3 manage.py migrate\npython manage.py loaddata db.json\n")])])]),e("ul",[e("li",[e("strong",[a._v("Configura el servidor de aplicaciones uwsgi, creando una unidad de systemd como hicimos en el taller2) y configura nginx como proxy inverso para servir la aplicación.")])])]),a._v(" "),e("hr"),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("apt install libapache2-mod-wsgi-py3\n")])])]),e("hr"),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("sudo apt-get update\nsudo apt-get upgrade\nsudo apt-get install build-essential python\nsudo apt-get install python-dev\nsudo apt-get install python3-all-dev\nsudo apt-get install uwsgi-plugin-python3\npip install uwsgi\n")])])]),e("p",[a._v("Para servir nuestra aplicación python, vamos a utilizar un servidor de aplicaciones llamado gunicorn. Además, vamos a configurar nginx como un proxy inverso para gestionar las solicitudes y servir la aplicación. Primero, instalaremos gunicorn en nuestro entorno virtual de python utilizando el comando pip.")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("pip install gunicorn\n")])])]),e("p",[a._v("Una vez hecho esto, podríamos ejecutar la aplicación simplemente con el siguiente comando.")]),a._v(" "),e("p",[e("strong",[a._v("Nota")]),a._v(": Debemos de estar en el directorio principal de la aplicación")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("gunicorn django_tutorial.wsgi\n")])])]),e("p",[a._v("Para garantizar que nuestra aplicación esté funcionando continuamente y poder acceder a ella mediante un virtualhost en nginx, vamos a crear una unidad de systemd para manejar ese proceso de manera más simple.")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("nano /etc/systemd/system/gunicorn-djangopolls.service\n")])])]),e("hr"),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("[Unit]\nDescription=gunicorn-djangopolls\nAfter=network.target\n\n[Install]\nWantedBy=multi-user.target\n\n[Service]\nUser=www-data\nGroup=www-data\nRestart=always\n\nExecStart=/home/olucas/my_entorno/bin/gunicorn django_tutorial.wsgi\nExecReload=/bin/kill -s HUP $MAINPID\nExecStop=/bin/kill -s TERM $MAINPID\n\nWorkingDirectory=/home/olucas/django_tutorial\nEnvironment=PYTHONPATH='/home/olucas/django_tutorial:/home/olucas/my_entorno/lib/python3.9/site-packages'\n\nPrivateTmp=true\n")])])]),e("p",[a._v("Ahora habilitamos e iniciamos el servicio:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("sudo systemctl enable gunicorn-djangopolls.service\nsudo systemctl start gunicorn-djangopolls.service \n")])])]),e("p",[a._v("En caso de realizar cambios en la configuración del fichero recientemente creado, es necesario recargar el demonio para aplicar los cambios.")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("sudo systemctl daemon-reload\n")])])]),e("p",[a._v("Ahora ya podemos crear el virtualhost en nginx para que sirva la aplicación:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("sudo nano /etc/nginx/sites-available/app-python.conf\n")])])]),e("hr"),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("server {\n        listen 80;\n        listen [::]:80;\n\n        root /home/olucas/django_tutorial;\n\n        index index.html index.php index.htm index.nginx-debian.html;\n\n        server_name python.olucass.com;\n\n        location / {\n                proxy_pass http://localhost:8000;\n                include proxy_params;\n        }\n\n        location /static {\n                alias /home/olucas/my_entorno/lib/python3.9/site-packages/django/contrib/admin/static;\n        }\n}\n")])])]),e("ul",[e("li",[e("p",[e("strong",[a._v("Debes asegurarte que el contenido estático se está sirviendo: ¿Se muestra la imagen de fondo de la aplicación? ¿Se ve de forma adecuada la hoja de estilo de la zona de administración?.")])])]),a._v(" "),e("li",[e("p",[e("strong",[a._v("Desactiva en la configuración el modo debug a False. Para que los errores de ejecución no den información sensible de la aplicación.")])]),a._v(" "),e("p",[a._v("nano django_tutorial/settings.py")])]),a._v(" "),e("li",[e("p",[e("strong",[a._v("La página web debe ser accesible usando https, en la URL: "),e("code",[a._v("https://python.tudominio.algo")])])])]),a._v(" "),e("li",[e("p",[e("strong",[a._v("Muestra la página funcionando. En la zona de administración se debe ver de forma adecuada la hoja de estilo.")])])])]),a._v(" "),e("h2",{attrs:{id:"tarea-3-modificacion-de-nuestra-aplicacion"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tarea-3-modificacion-de-nuestra-aplicacion"}},[a._v("#")]),a._v(" Tarea 3: Modificación de nuestra aplicación")]),a._v(" "),e("p",[e("strong",[a._v("Vamos a realizar cambios en el entorno de desarrollo y posteriormente vamos a subirlas a producción. Vamos a realizar tres modificaciones, pero recuerda que primero lo haces en el entorno de desarrollo, y luego tendrás que llevar los cambios a producción:")])]),a._v(" "),e("ul",[e("li",[e("p",[e("strong",[a._v("Modifica la página inicial donde se ven las encuestas para que aparezca tu nombre: Para ello modifica el archivo "),e("code",[a._v("django_tutorial/polls/templates/polls/index.html")]),a._v(".")])])]),a._v(" "),e("li",[e("p",[e("strong",[a._v("Modifica la imagen de fondo que se ve la aplicación.")])])]),a._v(" "),e("li",[e("p",[e("strong",[a._v("Vamos a crear una nueva tabla en la base de datos, para ello sigue los siguientes pasos:")])]),a._v(" "),e("ul",[e("li",[e("strong",[a._v("Añade un nuevo modelo al fichero "),e("code",[a._v("polls/models.py")]),a._v(":")])])])])]),a._v(" "),e("hr"),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v('class Categoria(models.Model):\n    Abr = models.CharField(max_length=4)\n    Nombre = models.CharField(max_length=50)\n    \n    def __str__(self):\n        `return self.Abr+" - "+self.Nombre\n')])])]),e("hr"),a._v(" "),e("ul",[e("li",[e("ul",[e("li",[e("p",[e("strong",[a._v("Crea una nueva migración.")])])]),a._v(" "),e("li",[e("p",[e("strong",[a._v("Y realiza la migración.")])])]),a._v(" "),e("li",[e("p",[e("strong",[a._v("Añade el nuevo modelo al sitio de administración de django:")])])])])])]),a._v(" "),e("p",[e("strong",[a._v("Para ello cambia la siguiente línea en el fichero "),e("code",[a._v("polls/admin.py")]),a._v(":")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("from .models import Choice, Question\n")])])]),e("p",[e("strong",[a._v("Por esta otra:")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("  from .models import Choice, Question, Categoria\n")])])]),e("p",[e("strong",[a._v("Y añade al final la siguiente línea:")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[a._v("admin.site.register(Categoria)\n")])])]),e("hr"),a._v(" "),e("ul",[e("li",[e("ul",[e("li",[e("strong",[a._v("Despliega el cambio producido al crear la nueva tabla en el entorno de producción.")])])])])])])}),[],!1,null,null,null);e.default=s.exports}}]);